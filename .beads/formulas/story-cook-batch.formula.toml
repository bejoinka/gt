# Formula: story-cook-batch
# Generate a batch of satirical events for ICE Cream Know Your Rights

description = """Generate a batch of satirical game events for ICE Cream Know Your Rights.

This is the Story-Cooker's core work: creating encounters, customer moments,
and procedural absurdities that punch up at systems while teaching structural
awareness.

**Output Required:**
1. 3-5 Agent Encounters (6-step format with state changes)
2. 3-5 Customer Moments (queue interactions)
3. 2 Announcements (policy shifts, euphemistic notices)
4. 1 End-of-Day Summary template
5. 1 Protest Encounter or Petition Moment

**Source Material:**
- docs/FACT_SHEET.md - Game context
- docs/TONE_AND_CONTENT.md - Voice guidelines
- docs/ENCOUNTER_EXAMPLES.md - Format reference
- docs/PROTESTS_AND_PROCEDURES.md - Protest content
- docs/GENERATED_EVENTS.md - Previous output (avoid duplication)
- docs/GENERATED_EVENTS_VOL2.md - Previous output (avoid duplication)

**Safety Checklist (each event):**
- [ ] Satire targets systems, not people
- [ ] Educational, not instructional
- [ ] Failure feels political, not personal
- [ ] Escalation rule followed (more polite = more dangerous)
- [ ] Trauma treated with restraint
"""
formula = "story-cook-batch"
type = "workflow"
version = 1

# Step 1: Read source material
[[steps]]
id = "read-source"
title = "Internalize Source Material"
description = """
Read and internalize all required source documents:
1. FACT_SHEET.md - Understand game world
2. TONE_AND_CONTENT.md - Voice and tone (NON-NEGOTIABLE)
3. ENCOUNTER_EXAMPLES.md - Format reference
4. PROTESTS_AND_PROCEDURES.md - Protest content
5. GENERATED_EVENTS.md + VOL2 - What's already done

DO NOT duplicate existing events. Create fresh content.
"""

# Step 2: Generate Agent Encounters
[[steps]]
id = "encounters"
title = "Generate Agent Encounters"
needs = ["read-source"]
description = """
Generate 3-5 new Agent Encounters in 6-step format:
1. Declaration
2. Shop Control
3. Engagement Choice
4. Documentation Check
5. Core Decision
6. Resolution

Each must include:
- Game Phase (1-4)
- Pressure Level
- Target Worker
- State Changes (Hidden/Visible)
- Player Options table
- Teaching Notes

Vary the phases, workers, and outcomes.
"""

# Step 3: Generate Customer Moments
[[steps]]
id = "customers"
title = "Generate Customer Moments"
needs = ["read-source"]
description = """
Generate 3-5 Customer Moments - queue interactions that reveal community mood.

Each should include:
- Customer type (regular, newcomer, nervous, curious, etc.)
- What they overhear/observe
- Their reaction
- What it teaches about community sentiment

These are small moments that build atmosphere and show how the
community is responding to escalating pressure.
"""

# Step 4: Generate Announcements
[[steps]]
id = "announcements"
title = "Generate Announcements"
needs = ["read-source"]
description = """
Generate 2 Announcements - policy shifts, ban claims, euphemistic notices.

These should be:
- Delightfully bureaucratic
- Euphemism-heavy
- Seemingly helpful but actually threatening
- Demonstrating "escalation via politeness"

Format as posted notices, radio announcements, or official letters.
"""

# Step 5: Generate End-of-Day Summary
[[steps]]
id = "summary"
title = "Generate End-of-Day Summary Template"
needs = ["read-source"]
description = """
Create an End-of-Day Summary template that:
- Recaps the day's events qualitatively
- Shows trend signals (what's increasing/decreasing)
- Uses deadpan, bureaucratic language
- Hints at tomorrow's "adjusted procedures"

This should be a template with placeholders for dynamic content.
"""

# Step 6: Generate Protest or Petition Content
[[steps]]
id = "protest"
title = "Generate Protest/Petition Moment"
needs = ["read-source"]
description = """
Generate 1 of either:
- Protest Encounter: Community mobilization moment
- Petition Moment: Signature gathering with tension

Consult PROTESTS_AND_PROCEDURES.md for guidance.
Must show community resistance without being instructional.
"""

# Step 7: Compile and Output
[[steps]]
id = "compile"
title = "Compile Output Volume"
needs = ["encounters", "customers", "announcements", "summary", "protest"]
description = """
Compile all content into a new volume file:
docs/GENERATED_EVENTS_VOL3.md

Include header with:
- Generation date
- Volume number
- Status: Ready for integration

Then mail the compiled output to mayor/ for review.
"""

[vars]

[vars.batchNumber]
description = "Batch/volume number for this work"
default = "3"
